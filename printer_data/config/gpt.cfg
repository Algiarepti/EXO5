[gcode_macro T0]
gcode:
  ACTIVATE_EXTRUDER EXTRUDER=extruder
  SET_DUAL_CARRIAGE CARRIAGE=0   ; links

[gcode_macro T1]
gcode:
  ACTIVATE_EXTRUDER EXTRUDER=extruder1
  SET_DUAL_CARRIAGE CARRIAGE=1   ; rechts

[gcode_macro HOME_X_T0]
description: Home X for T0 (left), then move off switch
gcode:
  T0
  G28 X
  G91
  G1 X10 F3000
  G90

[gcode_macro HOME_X_T1]
description: Home X for T1 (right), then move off switch
gcode:
  T1
  G28 X
  G91
  G1 X-10 F3000
  G90

[gcode_macro HOME_X_ACTIVE]
description: Home X for the currently active carriage and move off
gcode:
  {% if printer.toolhead.extruder == "extruder" %}
    HOME_X_T0
  {% else %}
    HOME_X_T1
  {% endif %}

[gcode_macro USE_T1_PROBE]
gcode:
  SET_PROBE PROBE=t1_probe

[gcode_macro INPUT_SHAPING_T0]
description: Input shaping for T0 (left)
gcode:
  T0
  SET_DUAL_CARRIAGE CARRIAGE=0
  SHAPER_CALIBRATE AXIS=X
  SHAPER_CALIBRATE AXIS=Y

[gcode_macro INPUT_SHAPING_T1]
description: Input shaping for T1 (right)
gcode:
  T1
  SET_DUAL_CARRIAGE CARRIAGE=1
  SHAPER_CALIBRATE AXIS=X
  SHAPER_CALIBRATE AXIS=Y